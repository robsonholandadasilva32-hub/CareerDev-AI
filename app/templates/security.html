{% extends "base.html" %}

{% block content %}
<div class="card security-panel">
    <h2>ğŸ” Central de SeguranÃ§a e PreferÃªncias</h2>

    {% if success %}
    <div style="background: rgba(0, 255, 136, 0.2); color: #00ff88; padding: 10px; border-radius: 8px; margin-bottom: 20px;">
        ConfiguraÃ§Ãµes atualizadas com sucesso!
    </div>
    {% endif %}

    <form method="post" action="/security/update" style="display: flex; flex-direction: column; gap: 20px;">

        <!-- 2FA Method -->
        <div class="setting-group">
            <h3>MÃ©todo de AutenticaÃ§Ã£o (2FA)</h3>
            <p style="color: #9ca3af; font-size: 0.9rem;">Escolha como deseja receber seus cÃ³digos de seguranÃ§a. Se um falhar, tentaremos o outro automaticamente.</p>

            <div style="display: flex; gap: 20px;">
                <label style="display: flex; items-center; gap: 8px; cursor: pointer;">
                    <input type="radio" name="method" value="email" {% if two_factor_method == 'email' or not two_factor_method %}checked{% endif %}>
                    <span>E-mail</span>
                </label>
                <label style="display: flex; items-center; gap: 8px; cursor: pointer;">
                    <input type="radio" name="method" value="sms" {% if two_factor_method == 'sms' %}checked{% endif %}>
                    <span>SMS</span>
                </label>
            </div>
        </div>

        <!-- Phone Update -->
        <div class="setting-group">
            <label for="phone">NÃºmero de Celular (Para SMS)</label>
            <input type="tel" name="phone" id="phone" placeholder="+55 11 99999-9999" style="width: 100%; padding: 10px; background: #0a1020; border: 1px solid #2d3748; border-radius: 6px; color: white; margin-top: 5px;" value="{{ user_phone }}">
        </div>

        <!-- Developer Contact -->
        <div class="setting-group" style="border-top: 1px solid #2d3748; padding-top: 20px; margin-top: 10px;">
            <h3>ğŸ‘¨â€ğŸ’» Fale com o Desenvolvedor</h3>
            <p style="color: #9ca3af; font-size: 0.9rem;">Tem alguma dÃºvida ou sugestÃ£o? Envie uma mensagem direta.</p>

            <input type="hidden" name="contact_dev" value="true">
            <textarea name="message_body" rows="4" placeholder="Sua mensagem aqui..." style="width: 100%; padding: 10px; background: #0a1020; border: 1px solid #2d3748; border-radius: 6px; color: white; margin-top: 5px;"></textarea>
            <small style="color: #6b7280;">Sua mensagem serÃ¡ enviada para: <strong>robsonholandasilva@yahoo.com.br</strong></small>
        </div>

        <button type="submit" class="btn">Salvar AlteraÃ§Ãµes e Enviar</button>
    </form>
</div>
{% endblock %}
