{% extends "base.html" %}

{% block content %}
<div class="card security-panel">
    <h2>ğŸ” Central de SeguranÃ§a e PreferÃªncias</h2>

    {% if success %}
    <div style="background: rgba(0, 255, 136, 0.2); color: #00ff88; padding: 10px; border-radius: 8px; margin-bottom: 20px;">
        ConfiguraÃ§Ãµes atualizadas com sucesso!
    </div>
    {% endif %}

    <!-- INCLUDE ACCESSIBILITY PANEL -->
    {% include 'partials/accessibility_panel.html' %}

    <form method="post" action="/security/update" style="display: flex; flex-direction: column; gap: 20px;">


        <!-- Password Change -->
        <div class="setting-group" style="border-top: 1px solid #2d3748; padding-top: 20px; margin-top: 10px;">
            <h3>ğŸ”‘ Alterar Senha</h3>
            <p style="color: #9ca3af; font-size: 0.9rem; margin-bottom: 10px;">Mantenha sua conta segura com uma senha forte.</p>

            <label for="current_password">Senha Atual</label>
            <input type="password" name="current_password" id="current_password" style="width: 100%; padding: 10px; background: #0a1020; border: 1px solid #2d3748; border-radius: 6px; color: white; margin-top: 5px; margin-bottom: 10px;">

            <label for="new_password">Nova Senha</label>
            <input type="password" name="new_password" id="new_password" style="width: 100%; padding: 10px; background: #0a1020; border: 1px solid #2d3748; border-radius: 6px; color: white; margin-top: 5px; margin-bottom: 10px;">

            <label for="confirm_password">Confirmar Nova Senha</label>
            <input type="password" name="confirm_password" id="confirm_password" style="width: 100%; padding: 10px; background: #0a1020; border: 1px solid #2d3748; border-radius: 6px; color: white; margin-top: 5px;">
        </div>

        <!-- Global Preferences -->
        <div class="setting-group" style="border-top: 1px solid #2d3748; padding-top: 20px; margin-top: 10px;">
            <h3>ğŸŒ PreferÃªncias Globais</h3>

            <label for="language">Idioma</label>
            <select name="language" id="language" style="width: 100%; padding: 10px; background: #0a1020; border: 1px solid #2d3748; border-radius: 6px; color: white; margin-top: 5px;">
                <option value="pt" {% if lang == 'pt' %}selected{% endif %}>ğŸ‡§ğŸ‡· PortuguÃªs (Brasil)</option>
                <option value="en" {% if lang == 'en' %}selected{% endif %}>ğŸ‡ºğŸ‡¸ English</option>
                <option value="es" {% if lang == 'es' %}selected{% endif %}>ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                <option value="fr" {% if lang == 'fr' %}selected{% endif %}>ğŸ‡«ğŸ‡· FranÃ§ais</option>
                <option value="de" {% if lang == 'de' %}selected{% endif %}>ğŸ‡©ğŸ‡ª Deutsch</option>
            </select>
        </div>

        <!-- Developer Contact -->
        <div class="setting-group" style="border-top: 1px solid #2d3748; padding-top: 20px; margin-top: 10px;">
            <h3>ğŸ‘¨â€ğŸ’» Fale com o Desenvolvedor</h3>
            <p style="color: #9ca3af; font-size: 0.9rem;">Tem alguma dÃºvida ou sugestÃ£o? Envie uma mensagem direta.</p>

            <input type="hidden" name="contact_dev" value="true">
            <textarea name="message_body" rows="4" placeholder="Sua mensagem aqui..." style="width: 100%; padding: 10px; background: #0a1020; border: 1px solid #2d3748; border-radius: 6px; color: white; margin-top: 5px;"></textarea>
            <small style="color: #6b7280;">Sua mensagem serÃ¡ enviada para: <strong>admin@careerdev-ai.online</strong></small>
        </div>

        <button type="submit" class="btn">Salvar AlteraÃ§Ãµes e Enviar</button>
    </form>

    <!-- Danger Zone -->
    <div class="setting-group" style="border-top: 1px solid #ff0055; padding-top: 20px; margin-top: 30px;">
        <h3 style="color: #ff0055;">â˜ ï¸ Zona de Perigo</h3>
        <p style="color: #9ca3af; font-size: 0.9rem;">Essas aÃ§Ãµes sÃ£o irreversÃ­veis.</p>

        <form method="post" action="/security/delete-account" onsubmit="return confirm('Tem certeza absoluta? Esta aÃ§Ã£o nÃ£o pode ser desfeita e todos os seus dados serÃ£o perdidos.');">
            <button type="submit" class="btn" style="background: rgba(255, 0, 85, 0.1); border: 1px solid #ff0055; color: #ff0055; width: auto; margin-top: 10px;">
                Excluir minha conta permanentemente
            </button>
        </form>
    </div>
</div>
{% endblock %}
