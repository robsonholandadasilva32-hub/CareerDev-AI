<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
  <meta charset="UTF-8">
  
  <!-- =====================================================
     FAVICON & APP ICONS — CONFIGURAÇÃO PROFISSIONAL
     ===================================================== -->

<!-- Fallback clássico (navegadores antigos) -->
<link rel="icon"
      href="/static/favicon/favicon.ico"
      sizes="any">

<!-- Favicon moderno (SVG — alta qualidade em qualquer escala) -->
<link rel="icon"
      href="/static/favicon/favicon.svg"
      type="image/svg+xml">

<!-- PNGs otimizados (fallback e compatibilidade ampla) -->
<link rel="icon"
      type="image/png"
      sizes="32x32"
      href="/static/favicon/favicon-32.png">

<link rel="icon"
      type="image/png"
      sizes="16x16"
      href="/static/favicon/favicon-16.png">

<!-- iOS / iPadOS (Adicionar à Tela Inicial) -->
<link rel="apple-touch-icon"
      href="/static/favicon/apple-touch-icon.png">

<!-- PWA / Android -->
<link rel="manifest"
      href="/static/favicon/manifest.json">

<!-- Cor do tema (barra do navegador mobile) -->
<meta name="theme-color" content="#0a0f1c">

  <title>{{ t.page_title }}</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="{{ t.page_description }}">

  <style>
    :root {
      /* Unified Colors with Login */
      --bg-main: #0a0f1c;
      --bg-card: #121a2f;
      --bg-input: #0a1020;
      --accent-blue: #00b4ff;
      --accent-green: #00ff9c;
      --text-main: #e6e9ef;
      --text-muted: #9aa4b2;
      --text-highlight: #ffffff;
      --border-soft: rgba(255, 255, 255, 0.1);
      --shadow-card: 0 8px 32px rgba(0, 0, 0, 0.4);
    }

    body {
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      background: var(--bg-main);
      background-image:
        radial-gradient(circle at 15% 50%, rgba(0, 180, 255, 0.08), transparent 25%),
        radial-gradient(circle at 85% 30%, rgba(0, 255, 156, 0.05), transparent 25%);
      color: var(--text-main);
      font-size: 16px;
      line-height: 1.6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* ===== HEADER (Unified) ===== */
    header {
      padding: 1.5rem 2rem;
      border-bottom: 1px solid var(--border-soft);
      background: rgba(10, 15, 28, 0.8);
      backdrop-filter: blur(10px);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .brand { display: flex; align-items: center; gap: 1rem; }
    .logo-container { width: 40px; height: 40px; position: relative; }
    .brand-text h1 { margin: 0; font-size: 1.25rem; font-weight: 700; color: var(--text-highlight); }
    .brand-text p { margin: 0; font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; }

    .header-controls { display: flex; gap: 1.5rem; align-items: center; }

    .security-badge {
      display: flex; align-items: center; gap: 0.5rem; font-size: 0.8rem;
      color: var(--accent-green); background: rgba(0, 255, 156, 0.1);
      padding: 0.4rem 0.8rem; border-radius: 20px; border: 1px solid rgba(0, 255, 156, 0.2);
    }

    .icon { width: 16px; height: 16px; }

    .lang-select {
      background: transparent; color: var(--text-muted); border: 1px solid var(--border-soft);
      padding: 0.4rem; border-radius: 6px; cursor: pointer;
    }

    @media (max-width: 600px) {
      .header-controls { gap: 0.8rem; }
      .security-badge span { display: none; }
      main { padding: 1rem; }
    }

    main {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    section {
       width: 100%;
       max-width: 440px;
       background: var(--bg-card);
       border: 1px solid var(--border-soft);
       border-radius: 16px;
       padding: 2.5rem;
       box-shadow: var(--shadow-card);
    }

    section {
      background: linear-gradient(180deg, #121a2f, #0e1528);
      border-radius: 12px;
      padding: 1.6rem;
      border: 1px solid var(--border-soft);
    }

    section h2 {
      margin-top: 0;
      margin-bottom: 1.2rem;
      text-align: center;
      color: var(--accent-blue);
      font-size: 1.4rem;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    label {
      font-size: 0.95rem;
      color: var(--text-muted);
    }

    input {
      padding: 0.7rem;
      border-radius: 8px;
      border: 1px solid var(--border-soft);
      background: #0a1020;
      color: var(--text-main);
      font-size: 1rem;
    }

    button {
      margin-top: 0.8rem;
      padding: 0.75rem;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      background: linear-gradient(90deg, var(--accent-blue), var(--accent-green));
      color: #001018;
      font-weight: 600;
    }

    .login-link {
      margin-top: 1.2rem;
      text-align: center;
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .login-link a {
      color: var(--accent-blue);
      font-weight: 600;
      text-decoration: none;
    }

    footer {
      margin: 2.4rem 0 1.2rem;
      text-align: center;
      font-size: 0.85rem;
      color: var(--text-muted);
    }
  </style>
</head>

<body>

<!-- HEADER (Unified with Login) -->
<header>
  <a href="/login" class="brand" style="text-decoration: none;">
    <div class="logo-container">
      <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="44" stroke="#00b4ff" stroke-width="4"/>
        <path d="M30 50h40M50 30v40" stroke="#00ff9c" stroke-width="4"/>
        <circle cx="50" cy="50" r="8" fill="#00b4ff" class="pulse"/>
      </svg>
    </div>
    <div class="brand-text">
      <h1>CareerDev AI</h1>
      <p>{{ t.project_phrase }}</p>
    </div>
  </a>

  <div class="header-controls">
    <div class="security-badge" title="Security Status: Active">
      <!-- SVG PADLOCK FIXED -->
      <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
      </svg>
      <span>{{ t.security_status }}</span>
</header>

<main>
  <section aria-labelledby="register-title">
    <h2 id="register-title">{{ t.register_title }}</h2>

    <!-- Creative Trial Banner -->
    <div style="margin-bottom: 20px; padding: 15px; background: rgba(0, 255, 136, 0.08); border: 1px solid #00ff88; border-radius: 12px; display: flex; align-items: center; gap: 15px; color: #00ff88; transition: transform 0.2s;">
        <div style="flex-shrink: 0; background: rgba(0, 255, 136, 0.2); padding: 10px; border-radius: 50%;">
            <!-- Creative Figure: Rocket/Unlock -->
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"></path>
                <path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"></path>
                <path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"></path>
                <path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"></path>
            </svg>
        </div>
        <div>
            <p style="margin: 0; font-weight: 600; font-size: 0.95rem; line-height: 1.4;">
                {{ t.trial_register_notice }}
            </p>
        </div>
    </div>

    <form method="post" action="/register">
      <input type="hidden" name="lang" value="{{ lang }}">

      <label for="name">{{ t.name_label }}</label>
      <input id="name" name="name" type="text" required>

      <label for="email">{{ t.email_label }}</label>
      <input id="email" name="email" type="email" required>

      <label for="password">{{ t.password_register_label }}</label>
      <input id="password" name="password" type="password" minlength="8" required oninput="validatePassword()">

      <label for="confirm_password">Confirmar Senha</label>
      <input id="confirm_password" name="confirm_password" type="password" minlength="8" required oninput="validatePassword()">
      <div id="password-error" style="color: #ff0055; font-size: 0.8rem; display: none;"></div>

      <!-- 2FA Preference Selection -->
      <label for="two_factor_pref">Método de Autenticação (2FA)</label>
      <select id="two_factor_pref" name="two_factor_pref" onchange="togglePhoneField()" style="padding: 0.7rem; border-radius: 8px; border: 1px solid var(--border-soft); background: #0a1020; color: var(--text-main); font-size: 1rem; width: 100%;">
          <option value="email">E-mail (Padrão)</option>
          <option value="telegram">Telegram (Bot)</option>
      </select>

      <div id="phone-container" style="display: none;">
          <label for="phone">ID do Chat Telegram (Obrigatório)</label>
          <input id="phone" name="phone" type="text" placeholder="Ex: 123456789">
          <small style="color: var(--text-muted); font-size: 0.8rem; display: block; margin-top: 5px;">
              ℹ️ Abra o bot <strong>@CareerDevBot</strong> no Telegram e envie <code>/start</code> para receber seu ID.
          </small>
      </div>

      <!-- Legal Compliance -->
      <div style="margin-top: 15px; margin-bottom: 10px;">
          <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; font-size: 0.9rem;">
              <input type="checkbox" id="terms" name="terms" required style="width: auto; margin: 0;">
              <span>Aceito os <a href="/legal/terms" target="_blank" style="color: var(--accent-blue);">Termos de Uso</a> e <a href="/legal/privacy" target="_blank" style="color: var(--accent-blue);">Política de Privacidade</a>.</span>
          </label>
      </div>

      <button type="submit">{{ t.register_button }}</button>

      <script>
        function togglePhoneField() {
            const pref = document.getElementById('two_factor_pref').value;
            const phoneContainer = document.getElementById('phone-container');
            const phoneInput = document.getElementById('phone');

            if (pref === 'telegram') {
                phoneContainer.style.display = 'block';
                phoneInput.required = true;
            } else {
                phoneContainer.style.display = 'none';
                phoneInput.required = false;
            }
        }

        function validatePassword() {
            const password = document.getElementById('password').value;
            const confirm = document.getElementById('confirm_password').value;
            const errorDiv = document.getElementById('password-error');
            const btn = document.querySelector('button[type="submit"]');

            let error = "";

            // Complexity Check
            const hasUpper = /[A-Z]/.test(password);
            const hasLower = /[a-z]/.test(password);
            const hasNumber = /[0-9]/.test(password);
            const hasSpecial = /[!@#$%^&*(),.?":{}|<>]/.test(password);

            if (password.length < 8) {
                error = "Senha muito curta (mínimo 8 caracteres).";
            } else if (!hasNumber || !hasSpecial) {
                error = "A senha deve conter pelo menos um número e um caractere especial.";
            } else if (password !== confirm && confirm.length > 0) {
                error = "As senhas não coincidem.";
            }

            if (error) {
                errorDiv.innerText = error;
                errorDiv.style.display = 'block';
                btn.disabled = true;
                btn.style.opacity = 0.5;
            } else {
                errorDiv.style.display = 'none';
                btn.disabled = false;
                btn.style.opacity = 1;
            }
        }
      </script>
    </form>

    <div class="login-link">
      <p>{{ t.have_account_text }}</p>
      <a href="/?lang={{ lang }}">{{ t.login_link_text }}</a>
    </div>
  </section>
</main>

<footer>
  {{ t.footer_text }}
</footer>

</body>
</html>

